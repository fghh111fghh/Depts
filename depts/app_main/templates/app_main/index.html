{% extends 'base.html' %}

{% block title %}Главная | Dashboard{% endblock %}

{% block content %}
<div class="ds-welcome-wrapper">
    <div class="ds-header-block">
        <h1>Личная экосистема</h1>
        <p>Центральный пульт управления модулями</p>
    </div>

    <div class="ds-modules-grid">
        {% for module in site_modules %}
            {# Если модуль активен, делаем его ссылкой, иначе — просто блоком #}
            {% if module.status == 'active' %}
                <a href="{% url module.url_name %}" class="ds-module-card">
            {% else %}
                <div class="ds-module-card ds-mod-disabled">
            {% endif %}

                <div class="ds-card-icon">
                    <i class="fa-solid {{ module.icon }}"></i>
                </div>

                <div class="ds-card-content">
                    <h3>{{ module.title }}</h3>
                    <p>{{ module.desc }}</p>
                    {# Класс тега (active/wait) подставляется автоматически из статуса #}
                    <span class="ds-tag ds-tag-{{ module.status }}">
                        {{ module.status_text }}
                    </span>
                </div>

            {% if module.status == 'active' %}
                </a>
            {% else %}
                </div>
            {% endif %}
        {% endfor %}
    </div>
</div>
{% endblock %}